<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario Turni</title>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #2E2E2E;
            color: #EAEAEA;
            margin: 0;
            padding: 2rem;
        }
        h1 {
            text-align: center;
            color: #F1C40F;
            margin-bottom: 1rem;
        }
        .calendar-container {
            max-width: 100%;
            margin: auto;
            overflow-x: auto;
        }
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background-color: #333;
        }
        .calendar-header {
            display: contents;
            background-color: #444;
            color: #EAEAEA;
            text-align: center;
            padding: 0.5rem;
            font-weight: bold;
        }
        .calendar-day {
            background-color: #555;
            color: #EAEAEA;
            text-align: center;
            padding: 0.5rem;
            min-height: 80px;
            position: relative;
        }
        .calendar-day.sun {
            background-color: #E74C3C;
            color: white;
        }
        .calendar-day.event-giornaliero {
            background-color: #F1C40F;
        }
        .calendar-day.event-pomeriggio {
            background-color: #00BFFF;
        }
        .calendar-day.event-mattino {
            background-color: #FFA500;
        }
        .calendar-day::after {
            content: attr(data-event);
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            text-align: center;
            background: rgba(0, 0, 0, 0.5);
            color: #EAEAEA;
            padding: 0.2rem;
            font-size: 0.8rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        @media (max-width: 768px) {
            .calendar {
                grid-template-columns: repeat(7, 1fr);
            }
            .calendar-day {
                min-height: 60px;
                font-size: 0.8rem;
                padding: 0.3rem;
            }
            .calendar-day::after {
                font-size: 0.7rem;
                padding: 0.1rem;
            }
        }
        @media (max-width: 480px) {
            .calendar {
                grid-template-columns: repeat(7, 1fr);
                gap: 0;
            }
            .calendar-day {
                min-height: 50px;
                font-size: 0.7rem;
                padding: 0.2rem;
            }
            .calendar-day::after {
                font-size: 0.6rem;
                padding: 0.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="calendar-container">
        <h1>Calendario Turni</h1>
        <div class="calendar" id="calendar">
            <div class="calendar-header">Lun</div>
            <div class="calendar-header">Mar</div>
            <div class="calendar-header">Mer</div>
            <div class="calendar-header">Gio</div>
            <div class="calendar-header">Ven</div>
            <div class="calendar-header">Sab</div>
            <div class="calendar-header">Dom</div>
            <!-- Le caselle dei giorni saranno inserite dinamicamente dallo script -->
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const calendarEl = document.getElementById('calendar');
            const daysInMonth = 31; // Numero massimo di giorni in un mese
            const startDate = new Date(2024, 8, 1); // 1 settembre 2024
            const endDate = new Date(2025, 11, 31); // 31 dicembre 2025
            const turnDuration = 7; // Durata di un turno in giorni
            const repeatInterval = 21; // Intervallo di ripetizione in giorni

            let currentDate = new Date(startDate);

            function addEvent(dayElement, title) {
                dayElement.setAttribute('data-event', title);
                dayElement.classList.add(`event-${title.toLowerCase()}`);
            }

            function generateCalendar() {
                while (currentDate <= endDate) {
                    const firstDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
                    const lastDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
                    const dayOfWeek = firstDayOfMonth.getDay();
                    const totalDays = lastDayOfMonth.getDate();
                    
                    for (let i = 0; i < 7; i++) {
                        if (currentDate.getMonth() !== startDate.getMonth() && i === 0) {
                            currentDate.setDate(1);
                            break;
                        }
                        if (i === 0 && currentDate.getDate() === 1) {
                            for (let j = 0; j < dayOfWeek; j++) {
                                calendarEl.innerHTML += '<div class="calendar-day"></div>';
                            }
                        }
                        if (currentDate.getDate() <= totalDays) {
                            const dayClass = currentDate.getDay() === 0 ? 'sun' : '';
                            const dayElement = document.createElement('div');
                            dayElement.className = `calendar-day ${dayClass}`;
                            dayElement.textContent = currentDate.getDate();
                            calendarEl.appendChild(dayElement);

                            // Aggiungi eventi
                            if (currentDate >= new Date(2024, 8, 2) && (currentDate - new Date(2024, 8, 2)) % (repeatInterval * 24 * 60 * 60 * 1000) === 0) {
                                addEvent(dayElement, 'Giornaliero');
                            }
                            if (currentDate >= new Date(2024, 8, 9) && (currentDate - new Date(2024, 8, 9)) % (repeatInterval * 24 * 60 * 60 * 1000) === 0) {
                                addEvent(dayElement, 'Pomeriggio');
                            }
                            if (currentDate >= new Date(2024, 8, 16) && (currentDate - new Date(2024, 8, 16)) % (repeatInterval * 24 * 60 * 60 * 1000) === 0) {
                                addEvent(dayElement, 'Mattino');
                            }
                            
                            currentDate.setDate(currentDate.getDate() + 1);
                        }
                    }
                }
            }

            generateCalendar();
        });
    </script>
</body>
</html>
