<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turni</title>
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.css' rel='stylesheet' />
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #2E2E2E;
            color: #EAEAEA;
            margin: 0;
            padding: 2rem;
        }
        h1 {
            text-align: center;
            color: #F1C40F;
            margin-bottom: 1rem;
        }
        .calendar-container {
            max-width: 1200px;
            margin: auto;
        }
        .fc-daygrid-day-number {
            color: #F1C40F; /* Colore del numero dei giorni */
        }
        .fc-event {
            color: #FFF;
            font-size: 0.85rem;
        }
        .fc-event-giornaliero {
            background-color: #F1C40F; /* Colore giallo per il turno giornaliero */
        }
        .fc-event-pomeriggio {
            background-color: #00BFFF; /* Colore celeste per il turno pomeridiano */
        }
        .fc-event-mattino {
            background-color: #FFA500; /* Colore arancione per il turno mattutino */
        }
    </style>
</head>
<body>
    <div class="calendar-container">
        <h1>Calendario Turni</h1>
        <div id='calendar'></div>
    </div>

    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.js'></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');

            var calendar = new FullCalendar.Calendar(calendarEl, {
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,dayGridWeek,dayGridDay'
                },
                initialView: 'dayGridMonth',
                editable: true,
                events: generateEvents(),
                eventContent: function(arg) {
                    let customHtml = `<div class="fc-event-title">${arg.event.title}</div>`;
                    if (arg.event.extendedProps.description) {
                        customHtml += `<div class="fc-event-description">${arg.event.extendedProps.description}</div>`;
                    }
                    return { html: customHtml }
                }
            });

            calendar.render();
        });

        // Funzione per generare eventi ripetitivi
        function generateEvents() {
            const events = [];
            const startDate = new Date(2024, 8, 2); // 2 settembre 2024
            const turnDuration = 7; // Durata di un turno in giorni
            const repeatInterval = 21; // Intervallo di ripetizione in giorni

            // Turno Giornaliero
            addRepeatingEvent(events, 'Turno Giornaliero', '#F1C40F', startDate, turnDuration, repeatInterval);

            // Turno Pomeriggio
            const pmStartDate = new Date(2024, 8, 9); // 9 settembre 2024
            addRepeatingEvent(events, 'Turno Pomeriggio', '#00BFFF', pmStartDate, turnDuration, repeatInterval);

            // Turno Mattino
            const amStartDate = new Date(2024, 8, 16); // 16 settembre 2024
            addRepeatingEvent(events, 'Turno Mattino', '#FFA500', amStartDate, turnDuration, repeatInterval);

            return events;
        }

        // Funzione per aggiungere eventi ripetitivi
        function addRepeatingEvent(events, title, color, startDate, duration, interval) {
            for (let i = 0; i < 12; i++) { // Limita a 12 mesi di eventi
                const start = new Date(startDate);
                start.setDate(start.getDate() + (i * interval));
                const end = new Date(start);
                end.setDate(end.getDate() + duration - 1);

                events.push({
                    title: title,
                    start: start.toISOString().split('T')[0],
                    end: end.toISOString().split('T')[0],
                    className: `fc-event-${title.toLowerCase().replace(' ', '-')}`,
                    extendedProps: {
                        description: `Inizio: ${start.toLocaleDateString()} - Fine: ${end.toLocaleDateString()}. Si ripete ogni 3 settimane.`
                    }
                });
            }
        }
    </script>
</body>
</html>
